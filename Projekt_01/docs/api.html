<!DOCTYPE html>

<html lang="pl" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>RestCountries data analysis – script overview &#8212; PROJEKT1 0.1 - dokumentacja</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=e6b3e68e"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=4c397337"></script>
    <link rel="index" title="Indeks" href="genindex.html" />
    <link rel="search" title="Szukaj" href="search.html" />
    <link rel="prev" title="RestCountriesProject documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="restcountries-data-analysis-script-overview">
<h1>RestCountries data analysis – script overview<a class="headerlink" href="#restcountries-data-analysis-script-overview" title="Link to this heading">¶</a></h1>
<p>This page describes what the script <code class="docutils literal notranslate"><span class="pre">PROJEKT1</span></code> does step by step.</p>
<section id="high-level-description">
<h2>High-level description<a class="headerlink" href="#high-level-description" title="Link to this heading">¶</a></h2>
<p>The script performs a complete data validation and exploration workflow on the
<a class="reference external" href="https://restcountries.com">RestCountries</a> API data. It:</p>
<ol class="arabic simple">
<li><p><strong>Downloads JSON data from the RestCountries API</strong></p>
<ul class="simple">
<li><p>URL used:
<code class="docutils literal notranslate"><span class="pre">https://restcountries.com/v3.1/all?fields=name,capital,region,subregion,population,area,currencies,languages,timezones,flags</span></code></p></li>
<li><p>Only selected fields are requested:
<code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">capital</span></code>, <code class="docutils literal notranslate"><span class="pre">region</span></code>, <code class="docutils literal notranslate"><span class="pre">subregion</span></code>, <code class="docutils literal notranslate"><span class="pre">population</span></code>,
<code class="docutils literal notranslate"><span class="pre">area</span></code>, <code class="docutils literal notranslate"><span class="pre">currencies</span></code>, <code class="docutils literal notranslate"><span class="pre">languages</span></code>, <code class="docutils literal notranslate"><span class="pre">timezones</span></code>, <code class="docutils literal notranslate"><span class="pre">flags</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Checks that the data was fetched correctly</strong></p>
<ul class="simple">
<li><p>Prints the HTTP status code (expects 200).</p></li>
<li><p>Prints the length of the response text.</p></li>
<li><p>Prints the first 500 characters of the raw JSON.</p></li>
<li><p>Checks whether key substrings like <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;population&quot;</span></code> are present.</p></li>
</ul>
</li>
<li><p><strong>Converts the JSON response into Python objects</strong></p>
<ul class="simple">
<li><p>If the status is 200, the JSON is converted to a Python list of dictionaries.</p></li>
<li><p>The script prints the type of the whole object and the type of the first element.</p></li>
<li><p>It also inspects the types of the first element fields:
<code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">capital</span></code>, <code class="docutils literal notranslate"><span class="pre">region</span></code>, <code class="docutils literal notranslate"><span class="pre">subregion</span></code>, <code class="docutils literal notranslate"><span class="pre">population</span></code>,
<code class="docutils literal notranslate"><span class="pre">area</span></code>, <code class="docutils literal notranslate"><span class="pre">currencies</span></code>, <code class="docutils literal notranslate"><span class="pre">languages</span></code>, <code class="docutils literal notranslate"><span class="pre">timezones</span></code>, <code class="docutils literal notranslate"><span class="pre">flags</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Recursively describes the nested JSON structure</strong></p>
<ul class="simple">
<li><p>Defines a helper function <code class="docutils literal notranslate"><span class="pre">describe(val)</span></code> which:
- detects dictionaries and describes each key recursively,
- detects lists and describes the type of their first element,
- for simple values returns the name of the Python type.</p></li>
<li><p>Builds a dictionary describing the structure of the first JSON record.</p></li>
<li><p>Pretty-prints this description using <code class="docutils literal notranslate"><span class="pre">json.dumps(...,</span> <span class="pre">indent=2)</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Checks installed Pydantic version</strong></p>
<ul class="simple">
<li><p>Imports <code class="xref py py-mod docutils literal notranslate"><span class="pre">pydantic</span></code> and prints the installed version number.</p></li>
</ul>
</li>
<li><p><strong>Defines Pydantic models for the RestCountries schema</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Flags</span></code> – stores URLs and alt text for a country flag.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NativeNameEntry</span></code> – stores official and common native names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code> – stores common name, official name and dictionary of native names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Currency</span></code> – stores currency name and symbol.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Country</span></code> – main model with fields:
<code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">flags</span></code>, <code class="docutils literal notranslate"><span class="pre">currencies</span></code>, <code class="docutils literal notranslate"><span class="pre">capital</span></code>, <code class="docutils literal notranslate"><span class="pre">region</span></code>, <code class="docutils literal notranslate"><span class="pre">subregion</span></code>,
<code class="docutils literal notranslate"><span class="pre">languages</span></code>, <code class="docutils literal notranslate"><span class="pre">area</span></code>, <code class="docutils literal notranslate"><span class="pre">population</span></code>, <code class="docutils literal notranslate"><span class="pre">timezones</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Validates all countries using Pydantic</strong></p>
<ul class="simple">
<li><p>Attempts to build a list of <code class="docutils literal notranslate"><span class="pre">Country</span></code> objects from the raw JSON.</p></li>
<li><p>Prints how many countries were successfully validated.</p></li>
<li><p>If validation fails, prints details of the <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.ValidationError</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Analyses optional fields in the Pydantic model</strong></p>
<ul class="simple">
<li><p>Iterates through <code class="docutils literal notranslate"><span class="pre">Country.model_fields</span></code> to detect optional fields.</p></li>
<li><p>For each raw country item:
- checks which optional fields are missing or set to <code class="docutils literal notranslate"><span class="pre">None</span></code>,
- prints a list of missing optional fields for that record.</p></li>
</ul>
</li>
<li><p><strong>Serializes data to and from JSON file</strong></p>
<ul class="simple">
<li><p>Saves the raw JSON data to <code class="docutils literal notranslate"><span class="pre">countries.json</span></code> with indentation for readability.</p></li>
<li><p>Reads the file back into memory.</p></li>
<li><p>Uses <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.json_normalize()</span></code> to convert it into a flat
<code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Performs manual type validation inside the DataFrame</strong></p>
<ul class="simple">
<li><p>Checks whether all values in column <code class="docutils literal notranslate"><span class="pre">population</span></code> are integers.</p></li>
<li><p>Checks whether all values in column <code class="docutils literal notranslate"><span class="pre">area</span></code> are integers or floats.</p></li>
<li><p>Prints rows where the type in these columns is invalid (if any).</p></li>
</ul>
</li>
<li><p><strong>Explores and quantifies missing values (NaN)</strong></p>
<ul class="simple">
<li><p>Prints total number of missing values per column.</p></li>
<li><p>Saves a subset of missing-value information to <code class="docutils literal notranslate"><span class="pre">braki.csv</span></code>.</p></li>
<li><p>Calculates:
- how many columns have at least one missing value,
- how many columns have no missing values,
- how many rows contain at least one missing value,
- how many rows have no missing values.</p></li>
<li><p>Computes the percentage of missing values per column, sorts them
in descending order and saves to <code class="docutils literal notranslate"><span class="pre">braki_procent.csv</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Drops columns with too many missing values</strong></p>
<ul class="simple">
<li><p>Defines a threshold (e.g. 89%).</p></li>
<li><p>Selects columns where the percentage of missing values is above this threshold.</p></li>
<li><p>Drops these columns from the DataFrame.</p></li>
<li><p>Prints how many columns were dropped and how many remain.</p></li>
<li><p>Saves the list of remaining column names to <code class="docutils literal notranslate"><span class="pre">pozostale_kolumny.csv</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Checks data types in selected currency and language columns</strong></p>
<ul class="simple">
<li><p>For example:
- <code class="docutils literal notranslate"><span class="pre">currencies.EUR.name</span></code>, <code class="docutils literal notranslate"><span class="pre">currencies.EUR.symbol</span></code>,
- French native names (<code class="docutils literal notranslate"><span class="pre">name.nativeName.fra.*</span></code>) and <code class="docutils literal notranslate"><span class="pre">languages.fra</span></code>,
- English native names (<code class="docutils literal notranslate"><span class="pre">name.nativeName.eng.*</span></code>) and <code class="docutils literal notranslate"><span class="pre">languages.eng</span></code>.</p></li>
<li><p>Builds a small DataFrame with information about the Python types found
in each of these columns.</p></li>
<li><p>Saves it to <code class="docutils literal notranslate"><span class="pre">typy_danych_sprawdzane.csv</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Fills missing values according to predefined business rules</strong></p>
<ul class="simple">
<li><p>For Euro currency:
- missing <code class="docutils literal notranslate"><span class="pre">currencies.EUR.name</span></code> and <code class="docutils literal notranslate"><span class="pre">currencies.EUR.symbol</span></code> → <code class="docutils literal notranslate"><span class="pre">&quot;not</span> <span class="pre">EUR&quot;</span></code>.</p></li>
<li><p>For French-related columns:
- missing values in native French names and <code class="docutils literal notranslate"><span class="pre">languages.fra</span></code> → <code class="docutils literal notranslate"><span class="pre">&quot;nonFR&quot;</span></code>.</p></li>
<li><p>For English-related columns:
- missing values in native English names and <code class="docutils literal notranslate"><span class="pre">languages.eng</span></code> → <code class="docutils literal notranslate"><span class="pre">&quot;nonENG&quot;</span></code>.</p></li>
<li><p>Re-checks whether any missing values remain in these columns.</p></li>
</ul>
</li>
<li><p><strong>Counts remaining missing values</strong></p>
<ul class="simple">
<li><p>Prints the number of columns that still contain missing values (if any).</p></li>
<li><p>Prints the number of rows with missing values and shows a sample of them.</p></li>
<li><p>Checks whether the DataFrame is completely free of NaNs.</p></li>
</ul>
</li>
<li><p><strong>Computes descriptive statistics using Pandas</strong></p>
<ul class="simple">
<li><p>Selects all numeric columns.</p></li>
<li><p>Computes:
- full descriptive statistics with <code class="docutils literal notranslate"><span class="pre">DataFrame.describe()</span></code>,
- mean values,
- median values,
- standard deviation.</p></li>
<li><p>Saves these statistics (transposed) to <code class="docutils literal notranslate"><span class="pre">statystyki_opisowe.csv</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Groups data and builds a pivot table</strong></p>
<ul class="simple">
<li><p>Groups countries by <code class="docutils literal notranslate"><span class="pre">region</span></code> and computes mean <code class="docutils literal notranslate"><span class="pre">population</span></code> and <code class="docutils literal notranslate"><span class="pre">area</span></code>.</p></li>
<li><p>Builds a pivot table with mean population per region.</p></li>
</ul>
</li>
<li><p><strong>Performs numeric transformations with NumPy</strong></p>
<ul class="simple">
<li><p>Adds new columns:
- <code class="docutils literal notranslate"><span class="pre">log_population</span></code> and <code class="docutils literal notranslate"><span class="pre">log_area</span></code> using <code class="docutils literal notranslate"><span class="pre">np.log1p</span></code>,
- <code class="docutils literal notranslate"><span class="pre">zscore_population</span></code> and <code class="docutils literal notranslate"><span class="pre">zscore_area</span></code> (standardization),
- <code class="docutils literal notranslate"><span class="pre">norm_population</span></code> and <code class="docutils literal notranslate"><span class="pre">norm_area</span></code> (normalization to [0, 1]).</p></li>
<li><p>Saves the full DataFrame with these derived columns to
<code class="docutils literal notranslate"><span class="pre">kraje_z_normalizacja.csv</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Creates visualizations using Matplotlib and Seaborn</strong></p>
<ul class="simple">
<li><p>Histogram of <code class="docutils literal notranslate"><span class="pre">population</span></code>.</p></li>
<li><p>Boxplot of <code class="docutils literal notranslate"><span class="pre">area</span></code>.</p></li>
<li><p>Scatter plot of <code class="docutils literal notranslate"><span class="pre">population</span></code> vs <code class="docutils literal notranslate"><span class="pre">area</span></code>.</p></li>
<li><p>Scatter plot of <code class="docutils literal notranslate"><span class="pre">log_population</span></code> vs <code class="docutils literal notranslate"><span class="pre">log_area</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Cleans and validates text fields using regular expressions</strong></p>
<ul class="simple">
<li><p>Defines a <code class="docutils literal notranslate"><span class="pre">clean_text</span></code> function that removes all characters except
letters and spaces.</p></li>
<li><p>Applies it to the <code class="docutils literal notranslate"><span class="pre">capital</span></code> column to create <code class="docutils literal notranslate"><span class="pre">capital_clean</span></code>.</p></li>
<li><p>Checks which regions do not match the pattern
<code class="docutils literal notranslate"><span class="pre">^[A-Za-z\\s]+$</span></code> (only letters and spaces).</p></li>
<li><p>Standardizes capital names to title case.</p></li>
<li><p>Saves the cleaned DataFrame to <code class="docutils literal notranslate"><span class="pre">df_regex_cleaned.csv</span></code>.</p></li>
</ul>
</li>
</ol>
</section>
<section id="source-code-optional">
<h2>Source code (optional)<a class="headerlink" href="#source-code-optional" title="Link to this heading">¶</a></h2>
<p>Below you can include the raw script for reference:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The PROJEKT1.py file is stored one level above the docs/source directory.</span>
<span class="c1"># You can show it here with a literalinclude if you want, e.g.:</span>
<span class="c1">#</span>
<span class="c1"># .. literalinclude:: ../PROJEKT1.py</span>
<span class="c1">#    :language: python</span>
<span class="c1">#    :linenos:</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PROJEKT1</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Szukaj" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Nawigacja</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">RestCountries data analysis – script overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#high-level-description">High-level description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#source-code-optional">Source code (optional)</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="poprzedni rozdział">RestCountriesProject documentation</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Jaroslaw Wanczewski.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>